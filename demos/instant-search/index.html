<!DOCTYPE html>
<meta charset="UTF-8">
<title>instant search demo</title>
<style>
	[ng-app] {
		margin: 1em;
	}
	.demo {
		margin: 3em 1em;
	}
</style>

<div ng-app="demoApp" ng-controller="DemoCtrl as ctrl">
	<div class="demo">
		<h3>local data</h3>
		<instant-search
				model="ctrl.selectedItem1"
				on-select="ctrl.onSelect(model)"
				options="ctrl.options1"></instant-search>
		<div style="line-height: 1.8em;font-size: 0.8em;"
				ng-bind-template="{{ctrl.selectedItem1.value}}|{{ctrl.selectedItem1.title}}"
				ng-show="ctrl.selectedItem1"></div>
	</div>
	<div class="demo">
		<h3>remote data</h3>
		<instant-search
				model="ctrl.selectedItem2"
				options="ctrl.options2"></instant-search>
		<div style="line-height: 1.8em;font-size: 0.8em;"
				ng-bind-template="{{ctrl.selectedItem2.value}}|{{ctrl.selectedItem2.title}}"
				ng-show="ctrl.selectedItem2"></div>
	</div>
</div>

<script src="/components.js"></script>
<script>
	angular.module('demoApp', ['ccms.components'])
		.controller('DemoCtrl', function($scope) {
			this.options1 = {
				placeholderText: '请输入区域名称',

				// 不使用远程数据源
				datalist: [
					{title: '上海', value: 'sh'},
					{title: '北京', value: 'bj'},
					{title: '深圳', value: 'sz'},
					{title: '广州', value: 'gz'},
					{title: '南京', value: 'nj'}
				],

				valueField: 'value',
				displayField: 'title',

				// 本地过滤顺序
				localFilterFields: ['value', 'title'],
			};
			this.options2 = {
				placeholderText: '请输入区域名称',

				// 使用远程数据源
				url: '/instant-search/',

				valueField: 'value',
				displayField: 'title',

				// 服务端搜索参数名
				//remoteSearchParamKey: 'value',
			};
			this.onSelect = (args) => {
				console.log(args);
			};
		});
</script>
